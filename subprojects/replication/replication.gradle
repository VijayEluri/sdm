apply plugin: 'war'
apply plugin: 'jetty'

dependencies {
	
	compile project(':shared')
	
	runtime libs.reflections
	
	// Configuration
	
	compile(libs.commons_configuration) {
		compile libs.commons_lang
		runtime libs.jcl_over_slf4j
	}
	
	// Guice
	
	compile(libs.guice_servlet) {
		compile libs.guice
		compile libs.aopalliance
	}
	
	// STS
	
	compile libs.seal

	// SAML

	compile(libraries.oiosaml) {
		exclude module: 'commons-logging'
		exclude module: 'servlet-api'
		exclude group: 'org.slf4j'
		runtime('org.opensaml:opensaml:2.4.1') {
			exclude module: 'velocity' // Wrong name in the POM.
			runtime(libraries.velocity) {
				exclude module: 'oro' // Not needed
			}
		}
	}

	// RID2CPR Client
	
	// TODO: The POM is completely messed up in this dep. 

	compile('com.trifork:rid2cprclient:1.4@jar') {
		runtime 'commons-httpclient:commons-httpclient:3.1'
		compile ('com.trifork:xmlobject:1.11') {
		
			runtime libs.jodi_time    

        	runtime 'org.apache.ws.commons.axiom:axiom-api:1.2.6@jar'
        	runtime 'org.apache.ws.commons.axiom:axiom-dom:1.2.6@jar'
        	runtime 'org.apache.ws.commons.axiom:axiom-impl:1.2.6@jar'
        
       		runtime libraries.commons_io
        
        	exclude group: "javax.servlet"
        	exclude group: "avalon"
		}
	}
	
	// JAXB
	
	compile libs.jaxb

	// MySQL
	
	compile libs.mysql_driver
	
	// IO Utils
	
	compile libs.commons_io
	
	// Fast infoset
	
	compile 'com.sun.xml.fastinfoset:FastInfoset:1.2.8'
	
	// Encryption
	
	compile libs.bouncycastle
	
	// HTML Templates
	
	compile "org.freemarker:freemarker:2.3.16"
	
	// Encoding
	
	compile libs.commons_codec

	// Testing
	
	testCompile libs.junit
	testCompile libs.hamcrest
	
	testCompile libs.mockito

	// SOSI test key store where the SealKetstore.jks
	// is stored.

	testRuntime fileTree(dir: 'sosi', include: '*.jar')
	testCompile 'xmlunit:xmlunit:1.1'
	
	// Logging
	
	compile libs.slf4j_api
	runtime libs.logback_core
	runtime libs.logback_classic
}
