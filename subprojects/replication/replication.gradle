apply plugin: 'war'
apply plugin: 'jetty'

dependencies {
	
	compile project(':shared')
	
	// Bug Finding
	// TODO: This should be removed for Java 7
	// since it is part of the std lib.
	
	compile 'com.google.code.findbugs:jsr305:1.3.9'
	
	compile(libs.reflections) {
		exclude group: 'ch.qos.logback'
	}
	
	// Configuration
	
	compile(libs.commons_configuration) {
		exclude module: 'commons-logging'
		runtime libs.jcl_over_slf4j
	}
	
	// Guice
	
	compile(libs.guice_servlet) {
		compile libs.guice
		compile libs.aopalliance
	}
	
	// Hibernate
	
	compile libs.hibernate
	
	// STS
	
	compile libs.seal

	// SAML

	compile(libs.oiosaml) {
		exclude module: 'commons-logging'
		exclude module: 'servlet-api'
		exclude group: 'org.slf4j'
		runtime('org.opensaml:opensaml:2.4.1') {
			exclude module: 'velocity' // Wrong name in the POM.
			runtime(libs.velocity) {
				exclude module: 'oro' // Not needed
			}
		}
	}

	// RID2CPR Client
	
	// TODO: The POM is completely messed up in this dep. 

	compile('com.trifork:rid2cprclient:1.4@jar') {
		runtime 'commons-httpclient:commons-httpclient:3.1'
		compile ('com.trifork:xmlobject:1.11') {
			
			runtime libs.jodi_time
			
			runtime 'org.apache.ws.commons.axiom:axiom-api:1.2.6@jar'
			runtime 'org.apache.ws.commons.axiom:axiom-dom:1.2.6@jar'
			runtime 'org.apache.ws.commons.axiom:axiom-impl:1.2.6@jar'
			
			runtime libs.commons_io
			
			exclude group: "javax.servlet"
			exclude group: "avalon"
			exclude group: "org.slf4j"
		}
	}
	
	// JAXB
	
	compile libs.jaxb

	// MySQL
	
	compile libs.mysql_driver
	
	// IO Utils
	
	compile libs.commons_io
	
	// Fast infoset
	
	compile 'com.sun.xml.fastinfoset:FastInfoset:1.2.8'
	
	// HTML Templates
	
	compile "org.freemarker:freemarker:2.3.16"
	
	// Encoding
	
	compile libs.commons_codec

	// Testing
	
	testCompile libs.junit
	testCompile libs.hamcrest
	testCompile libs.mockito
	
	// Testing (In-memory DB)
	
	testCompile 'com.h2database:h2:1.3.152'
	
	// Logging
	//
	// Unfortunatly we have to use Log4J since OIOSAML
	// uses some custom configuration that is log4j specific.
	// Logback would have less overhead.
	
	compile libs.slf4j_api
	runtime libs.log4j_slf4j
}
