apply plugin: 'war'
apply plugin: 'jetty'

dependencies {
	
	compile project(':shared')
	
	runtime libs.reflections
	
	// Configuration
	
	compile(libs.commons_configuration) {
		compile libs.commons_lang
		runtime libs.jcl_over_slf4j
	}
	
	// Guice
	
	compile(libs.guice_api) {
		compile "javax.inject:javax.inject:1.0@jar"
		compile "aopalliance:aopalliance:1.0@jar"
	}
	compile libs.guice_servlet
	compile libs.guice_assistedinject
	
	// STS
	
	// The SEAL component has not been properly packed with a pom
	// or ivy file and thus we have to declare the dependencies ourselves.
	
	compile('dk.sosi:seal:1.5.13') {
		runtime 'xml-security:xmlsec:1.3.0'
		runtime('xalan:xalan:2.7.1') {
			runtime 'xerces:xercesImpl:2.9.1'
		}
	}
	
	// SAML
	
	compile module('dk.itst.oiosaml:oiosaml.java:5987') {
		dependency libs.velocity
		dependency 'opensaml:opensaml:2.2.0'
		dependency 'opensaml:xmltooling:1.1.0'
		dependency 'opensaml:openws:1.2.0'
	}
	
	compile('com.trifork:rid2cprclient:1.2') {
		// TODO: Make the person who made RID2CPR
		// fix his ivy file. The runtime dependencies are messed up.
		runtime 'commons-httpclient:commons-httpclient:3.1@jar'
		runtime 'com.trifork:xmlobject:1.9'
	}
	
	// MySQL
	
	compile libs.mysql_driver
	
	// IO Utils
	
	compile libs.commons_io
	
	// Fast infoset
	
	compile 'com.sun.xml.fastinfoset:FastInfoset:1.2.8'
	
	// Encryption
	
	compile libs.bouncycastle
	
	// HTML Templates
	
	compile "org.freemarker:freemarker:2.3.16"
	
	// Encoding
	
	compile libs.commons_codec

	// Testing
	
	testCompile libs.junit
	testCompile libs.hamcrest
	
	testCompile module(libs.mockito) {
		dependency libs.objenesis
	}
	
	testCompile 'org.yaml:snakeyaml:1.7'
	testCompile 'org.dbunit:dbunit:2.4.8'
	testCompile 'com.h2database:h2:1.3.148'
	
	// SOSI test key store where the SealKetstore.jks
	// is stored.

	testRuntime fileTree(dir: 'sosi', include: '*.jar')

	testCompile 'xmlunit:xmlunit:1.1'
	
	// Logging
	
	compile libs.slf4j_api
	runtime libs.logback_core
	runtime libs.logback_classic
}
