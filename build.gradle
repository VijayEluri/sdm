apply plugin: 'java-base'

libs = [
	commons_io: 'commons-io:commons-io:2.0',
	commons_codec: 'commons-codec:commons-codec:1.4',
	commons_lang: 'commons-lang:commons-lang:2.5',
	slf4j_api: 'org.slf4j:slf4j-api:1.6.1',
	logback_core: 'ch.qos.logback:logback-core:0.9.27',
	logback_classic: 'ch.qos.logback:logback-classic:0.9.27',
	servlet_api: 'javax.servlet:servlet-api:2.4',
	reflections: 'org.reflections:reflections:0.9.5-RC2',
	jpa_api: 'org.hibernate.java-persistence:jpa-api:2.0-cr-1',
	mysql_driver: 'mysql:mysql-connector-java:5.1.13',
	junit: 'junit:junit:4.8.2',
	mockito: 'org.mockito:mockito-core:1.8.5',
	objenesis: 'org.objenesis:objenesis:1.2',,
	hamcrest: 'org.hamcrest:hamcrest-library:1.2',
	bouncycastle: 'bouncycastle:bcprov-jdk16:140',
	jodi_time: 'joda-time:joda-time:1.6',
	velocity: 'apache-velocity:velocity:1.5',
	guice_api: 'com.google.inject:guice:3.0-rc2',
	guice_servlet: 'com.google.inject:guice-servlet:3.0-rc2',
	guice_assistedinject: 'com.google.inject:guice-assistedinject:3.0-rc2'
]

allprojects {
	group = 'com.trifork'
	version = '3.0.0'

	repositories {
		mavenRepo urls: 'http://gradle.artifactoryonline.com/gradle/libs'
		mavenRepo urls: 'http://repository.jboss.com/maven2'
		mavenRepo urls: 'http://download.java.net/maven/2/'
		mavenRepo urls: 'http://reflections.googlecode.com/svn/repo'
		mavenRepo urls: 'http://nexus.ci81.trifork.com/content/groups/public'
	}

	apply plugin: 'eclipse'

	eclipseClasspath {
		variables = [:]
	}
}

subprojects {
	apply plugin: 'java'
	
	sourceCompatibility = 1.6
	targetCompatibility = 1.6
	
	// Check that the war-projects' layout match the convention.
	
	plugins.withType(WarPlugin).whenPluginAdded {
		project.webXml = new File(webAppDir, 'WEB-INF/web.xml')
		assert project.webAppDir.isDirectory()
		assert project.webXml.isFile()
	}
	
	// Include transitive compile dependencies by default.
	
	configurations.compile.transitive = true
		
	configurations {
		runtime {
			// Exclude other logging from all dependencies
			// since we will be using slf4j and backlog.
		
			exclude group: "commons-logging"
			exclude group: "log4j"
		}
	}
}
